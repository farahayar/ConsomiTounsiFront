{"ast":null,"code":"import { Chat } from 'src/app/models/chat';\nimport * as $ from \"jquery\";\nimport { User } from 'src/app/models/user';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/chat.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction ChatComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, item_r1.sender === ctx_r0.userId ? \"self\" : \"user\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind2(2, 3, item_r1.date, \"dd-mm-yyyy hh:mm\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", item_r1.message, \" \");\n  }\n}\n\nconst _c1 = function () {\n  return {\n    standalone: true\n  };\n};\n\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    constructor(chatService) {\n      this.chatService = chatService;\n      this.userId = 5;\n      this.messages = [];\n    }\n\n    ngOnInit() {\n      this.chatService.initializeWebSocketConnection();\n      this.initChatJquery();\n      this.chatService.onMessage().subscribe(newMsg => {\n        if (newMsg.sender != this.userId) this.playAudio();\n        this.messages.push(newMsg);\n      });\n    }\n\n    onSend() {\n      console.log(this.messageInput);\n      let chat = new Chat(new User(this.userId), new User(5), this.messageInput, new Date());\n      this.messageInput = \"\";\n      console.log(chat);\n      this.chatService.publishMessage(chat).subscribe(res => {});\n      this.chatService.sendMessage(chat);\n    }\n\n    initChatJquery() {\n      $(function () {\n        const scale = \"scale\";\n        $(\"#chat-circle\").click(function () {\n          $(\"#chat-circle\").toggle(scale);\n          $(\".chat-box\").toggle(scale);\n        });\n        $(\".chat-box-toggle\").click(function () {\n          $(\"#chat-circle\").toggle(scale);\n          $(\".chat-box\").toggle(scale);\n        });\n      });\n    }\n\n    playAudio() {\n      let audio = new Audio();\n      audio.src = \"../../../assets/message.mp3\";\n      audio.load();\n      audio.play();\n    }\n\n  }\n\n  ChatComponent.ɵfac = function ChatComponent_Factory(t) {\n    return new (t || ChatComponent)(i0.ɵɵdirectiveInject(i1.ChatService));\n  };\n\n  ChatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ChatComponent,\n    selectors: [[\"app-chat\"]],\n    decls: 18,\n    vars: 4,\n    consts: [[\"id\", \"body\"], [\"id\", \"chat-circle\", 1, \"btn\", \"btn-raised\"], [\"id\", \"chat-overlay\"], [\"src\", \"/assets/chat-4-xxl.png\", \"width\", \"64\"], [1, \"chat-box\"], [1, \"chat-box-header\"], [1, \"chat-box-toggle\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"chat-box-body\"], [1, \"chat-box-overlay\"], [1, \"chat-logs\"], [\"class\", \"chat-msg \", 3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"chat-input\"], [\"type\", \"text\", \"id\", \"chat-input\", \"placeholder\", \"Send a message...\", 3, \"ngModel\", \"ngModelOptions\", \"ngModelChange\"], [\"id\", \"chat-submit\", 1, \"chat-submit\", 3, \"click\"], [\"src\", \"/assets/send.svg\"], [1, \"chat-msg\", 3, \"ngClass\"], [1, \"cm-msg-text\", 3, \"title\"]],\n    template: function ChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"div\", 2)(3, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5);\n        i0.ɵɵtext(6, \" ChatAdmin \");\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵelement(8, \"button\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵelement(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵtemplate(12, ChatComponent_div_12_Template, 4, 8, \"div\", 11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 12)(14, \"form\")(15, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function ChatComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.messageInput = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function ChatComponent_Template_button_click_16_listener() {\n          return ctx.onSend();\n        });\n        i0.ɵɵelement(17, \"img\", 15);\n        i0.ɵɵelementEnd()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngForOf\", ctx.messages);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.messageInput)(\"ngModelOptions\", i0.ɵɵpureFunction0(3, _c1));\n      }\n    },\n    directives: [i2.NgForOf, i2.NgClass, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    pipes: [i2.DatePipe],\n    styles: [\"#body[_ngcontent-%COMP%]{z-index:1000}#center-text[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;justify-content:center;align-items:center;height:100%}#chat-circle[_ngcontent-%COMP%]{display:flex;position:fixed;bottom:50px;right:50px;background:#3bb77e;width:40px;height:40px;border-radius:50%;color:#fff;padding:28px;cursor:pointer;box-shadow:0 3px 16px #0009,0 3px 1px -2px #0003,0 1px 5px #0000001f}.btn#my-btn[_ngcontent-%COMP%]{background:white;border-radius:45px;padding:13px 40px 12px;color:#5865c3}#chat-overlay[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;display:none}.chat-box[_ngcontent-%COMP%]{display:none;background:#efefef;position:fixed;right:30px;bottom:50px;width:350px;max-width:85vw;max-height:100vh;border-radius:5px;box-shadow:0 5px 35px 9px #ccc}.chat-box-toggle[_ngcontent-%COMP%]{float:right;margin-right:15px;cursor:pointer}.chat-box-header[_ngcontent-%COMP%]{background:#3bb77e;height:30px;border-top-left-radius:5px;border-top-right-radius:5px;color:#fff;text-align:center;font-size:20px;padding-top:17px}.chat-box-body[_ngcontent-%COMP%]{position:relative;height:250px;height:auto;border:1px solid #ccc;overflow:hidden}.chat-box-body[_ngcontent-%COMP%]:after{content:\\\"\\\";background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAgOCkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgY3g9IjE3NiIgY3k9IjEyIiByPSI0Ii8+PHBhdGggZD0iTTIwLjUuNWwyMyAxMW0tMjkgODRsLTMuNzkgMTAuMzc3TTI3LjAzNyAxMzEuNGw1Ljg5OCAyLjIwMy0zLjQ2IDUuOTQ3IDYuMDcyIDIuMzkyLTMuOTMzIDUuNzU4bTEyOC43MzMgMzUuMzdsLjY5My05LjMxNiAxMC4yOTIuMDUyLjQxNi05LjIyMiA5LjI3NC4zMzJNLjUgNDguNXM2LjEzMSA2LjQxMyA2Ljg0NyAxNC44MDVjLjcxNSA4LjM5My0yLjUyIDE0LjgwNi0yLjUyIDE0LjgwNk0xMjQuNTU1IDkwcy03LjQ0NCAwLTEzLjY3IDYuMTkyYy02LjIyNyA2LjE5Mi00LjgzOCAxMi4wMTItNC44MzggMTIuMDEybTIuMjQgNjguNjI2cy00LjAyNi05LjAyNS0xOC4xNDUtOS4wMjUtMTguMTQ1IDUuNy0xOC4xNDUgNS43IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTg1LjcxNiAzNi4xNDZsNS4yNDMtOS41MjFoMTEuMDkzbDUuNDE2IDkuNTIxLTUuNDEgOS4xODVIOTAuOTUzbC01LjIzNy05LjE4NXptNjMuOTA5IDE1LjQ3OWgxMC43NXYxMC43NWgtMTAuNzV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjcxLjUiIGN5PSI3LjUiIHI9IjEuNSIvPjxjaXJjbGUgZmlsbD0iIzAwMCIgY3g9IjE3MC41IiBjeT0iOTUuNSIgcj0iMS41Ii8+PGNpcmNsZSBmaWxsPSIjMDAwIiBjeD0iODEuNSIgY3k9IjEzNC41IiByPSIxLjUiLz48Y2lyY2xlIGZpbGw9IiMwMDAiIGN4PSIxMy41IiBjeT0iMjMuNSIgcj0iMS41Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTkzIDcxaDN2M2gtM3ptMzMgODRoM3YzaC0zem0tODUgMThoM3YzaC0zeiIvPjxwYXRoIGQ9Ik0zOS4zODQgNTEuMTIybDUuNzU4LTQuNDU0IDYuNDUzIDQuMjA1LTIuMjk0IDcuMzYzaC03Ljc5bC0yLjEyNy03LjExNHpNMTMwLjE5NSA0LjAzbDEzLjgzIDUuMDYyLTEwLjA5IDcuMDQ4LTMuNzQtMTIuMTF6bS04MyA5NWwxNC44MyA1LjQyOS0xMC44MiA3LjU1Ny00LjAxLTEyLjk4N3pNNS4yMTMgMTYxLjQ5NWwxMS4zMjggMjAuODk3TDIuMjY1IDE4MGwyLjk0OC0xOC41MDV6IiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yNSIvPjxwYXRoIGQ9Ik0xNDkuMDUgMTI3LjQ2OHMtLjUxIDIuMTgzLjk5NSAzLjM2NmMxLjU2IDEuMjI2IDguNjQyLTEuODk1IDMuOTY3LTcuNzg1LTIuMzY3LTIuNDc3LTYuNS0zLjIyNi05LjMzIDAtNS4yMDggNS45MzYgMCAxNy41MSAxMS42MSAxMy43MyAxMi40NTgtNi4yNTcgNS42MzMtMjEuNjU2LTUuMDczLTIyLjY1NC02LjYwMi0uNjA2LTE0LjA0MyAxLjc1Ni0xNi4xNTcgMTAuMjY4LTEuNzE4IDYuOTIgMS41ODQgMTcuMzg3IDEyLjQ1IDIwLjQ3NiAxMC44NjYgMy4wOSAxOS4zMzEtNC4zMSAxOS4zMzEtNC4zMSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEuMjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvZz48L3N2Zz4=);opacity:.1;top:0;left:0;bottom:0;right:0;height:100%;position:absolute;z-index:-1}#chat-input[_ngcontent-%COMP%]{background:#f4f7f9;width:100%;position:relative;height:47px;padding:10px 50px 10px 15px;border:none;resize:none;outline:none;border:1px solid #ccc;color:#888;border-top:none;border-bottom-right-radius:5px;border-bottom-left-radius:5px;overflow:hidden}.chat-input[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{margin-bottom:0;display:flex}#chat-input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#ccc}#chat-input[_ngcontent-%COMP%]::-moz-placeholder{color:#ccc}#chat-input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ccc}#chat-input[_ngcontent-%COMP%]:-moz-placeholder{color:#ccc}.chat-submit[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;background:transparent;box-shadow:none;border:none;border-radius:50%;color:#3bb77e;width:35px;height:35px;cursor:pointer}.chat-logs[_ngcontent-%COMP%]{padding:15px;height:250px;overflow-y:scroll}.chat-logs[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#f5f5f5}.chat-logs[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px;background-color:#f5f5f5}.chat-logs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#3bb77e}@media only screen and (max-width: 500px){.chat-logs[_ngcontent-%COMP%]{height:40vh}}.chat-msg.user[_ngcontent-%COMP%] > .msg-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;float:left;width:15%}.chat-msg.self[_ngcontent-%COMP%] > .msg-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;float:right;width:15%}.cm-msg-text[_ngcontent-%COMP%]{background:white;padding:10px 15px;color:#666;max-width:75%;float:left;margin-left:10px;position:relative;margin-bottom:20px;border-radius:30px}.chat-msg[_ngcontent-%COMP%]{clear:both}.chat-msg.self[_ngcontent-%COMP%] > .cm-msg-text[_ngcontent-%COMP%]{float:right;margin-right:10px;background:#3bb77e;color:#fff}.cm-msg-button[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{list-style:none;float:left;width:50%}.cm-msg-button[_ngcontent-%COMP%]{clear:both;margin-bottom:70px}\"]\n  });\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}