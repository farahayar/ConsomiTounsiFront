{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/auth.service\";\nimport * as i2 from \"../../service/token-storage.service\";\nimport * as i3 from \"../../layouts/nav-bar/nav-bar.component\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../layouts/footer/footer.component\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, tokenStorage) {\n      this.authService = authService;\n      this.tokenStorage = tokenStorage;\n      this.form = {\n        email: null,\n        password: null\n      };\n      this.isLoggedIn = false;\n      this.isLoginFailed = false;\n      this.errorMessage = '';\n      this.roles = [];\n    }\n\n    ngOnInit() {\n      if (this.tokenStorage.getToken()) {\n        this.isLoggedIn = true;\n        this.roles = this.tokenStorage.getUser().roles;\n      }\n    }\n\n    onSubmit() {\n      const {\n        email,\n        password\n      } = this.form;\n      this.authService.login(email, password).subscribe({\n        next: data => {\n          this.tokenStorage.saveToken(data.accessToken);\n          this.tokenStorage.saveUser(data);\n          this.isLoginFailed = false;\n          this.isLoggedIn = true;\n          this.roles = this.tokenStorage.getUser().roles;\n          this.reloadPage();\n        },\n        error: err => {\n          this.errorMessage = err.error.message;\n          this.isLoginFailed = true;\n        }\n      });\n    }\n\n    reloadPage() {\n      window.location.reload();\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 38,\n    vars: 0,\n    consts: [[1, \"main\", \"pages\"], [1, \"page-header\", \"breadcrumb-wrap\"], [1, \"container\"], [1, \"breadcrumb\"], [\"href\", \"index.html\", \"rel\", \"nofollow\"], [1, \"fi-rs-home\", \"mr-5\"], [1, \"page-content\", \"pt-150\", \"pb-150\"], [1, \"row\"], [1, \"col-xl-8\", \"col-lg-10\", \"col-md-12\", \"m-auto\"], [1, \"col-lg-6\", \"pr-30\", \"d-none\", \"d-lg-block\"], [\"src\", \"assets/imgs/page/login-1.png\", \"alt\", \"\", 1, \"border-radius-15\"], [1, \"col-lg-6\", \"col-md-8\"], [1, \"login_wrap\", \"widget-taber-content\", \"background-white\"], [1, \"padding_eight_all\", \"bg-white\"], [1, \"heading_s1\"], [1, \"mb-5\"], [1, \"mb-30\"], [\"href\", \"/home/Register\"], [\"method\", \"post\"], [1, \"form-group\"], [\"type\", \"text\", \"required\", \"\", \"name\", \"email\", \"placeholder\", \"Username or Email *\"], [\"required\", \"\", \"type\", \"password\", \"name\", \"password\", \"placeholder\", \"Your password *\"], [\"type\", \"submit\", \"name\", \"login\", 1, \"btn\", \"btn-heading\", \"btn-block\", \"hover-up\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-nav-bar\");\n        i0.ɵɵelementStart(1, \"main\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"a\", 4);\n        i0.ɵɵelement(6, \"i\", 5);\n        i0.ɵɵtext(7, \"Home\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"span\");\n        i0.ɵɵtext(9, \" Pages \");\n        i0.ɵɵelement(10, \"span\");\n        i0.ɵɵtext(11, \" My Account \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"div\", 2)(14, \"div\", 7)(15, \"div\", 8)(16, \"div\", 7)(17, \"div\", 9);\n        i0.ɵɵelement(18, \"img\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 11)(20, \"div\", 12)(21, \"div\", 13)(22, \"div\", 14)(23, \"h1\", 15);\n        i0.ɵɵtext(24, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"p\", 16);\n        i0.ɵɵtext(26, \"Don't have an account? \");\n        i0.ɵɵelementStart(27, \"a\", 17);\n        i0.ɵɵtext(28, \"Create here\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"form\", 18)(30, \"div\", 19);\n        i0.ɵɵelement(31, \"input\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 19);\n        i0.ɵɵelement(33, \"input\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 19)(35, \"button\", 22);\n        i0.ɵɵtext(36, \"Log in\");\n        i0.ɵɵelementEnd()()()()()()()()()()()();\n        i0.ɵɵelement(37, \"app-footer\");\n      }\n    },\n    directives: [i3.NavBarComponent, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.FooterComponent],\n    styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  {// webpackBootstrap \\\"use strict\\\";})()[_ngcontent-%COMP%] ;{%BLOCK%}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}